---
title: TCP/IP的网络模型
date: 2025-07-04 12:20:57
tags:
categories: 计算机网络知识
---

参考博客[2.1 TCP/IP 网络模型有哪几层？ | 小林coding](https://xiaolincoding.com/network/1_base/tcp_ip_model.html#应用层)个人学习笔记

# 网络模型

OSI网络模型有七层：应用层、表现层、会话层、传输层、网络层、数据链路层、物理层；但是OSI网络模型只是一个逻辑概念，一个规范，实际网络中使用的网络模型是TCP/IP网络模型

TCP/IP网络模型一般分为四层或五层（都可以）

- 四层：应用层、传输层、网络层、网络接口层

- 五层：应用层、传输层、网络层、数据链路层、物理层

# TCP/IP网络模型剖析（以四层解析）

## 应用层

- 应用层是直接接触到用户的一层，例如网页浏览，手机软件等应用。当不同设备之间需要通信时，就将应用层数据传给下一层（传输层）

- 应用层提供的服务：网页浏览（HTTP、HTTPS），文件传输（FTP），邮件（SMTP）
- 应用层属于用户态，和用户进行交互；传输层及以下几层为内核层，操作系统来控制

例如使用HTTP协议，那么应用层的数据会由HTTP协议进行封装为HTTP报文（HTTP报文：HTTP请求报文+数据）



## 传输层

- 应用层的数据会传给传输层，传输层为应用层提供网络服务
- 传输层具有两个协议TCP、UDP协议：TCP为可靠性传输，具有超时重传、流量控制、拥塞控制等机制；UDP为不可靠性传输，但实时性高，传输效率高
- 该层会将应用层传输过来的HTTP报文封装变成TCP报文（TCP报文：TCP报文头+HTTP报文）；TCP报文头里具有源端口和目标端口两个字段，端口是用来区分该报文传输到不同的应用程序使用的
- 当传输层的数据包大小超过 MSS（TCP 最大报文段长度） ，就要将数据包分块，这样即使中途有一个分块丢失或损坏了，只需要重新发送这一个分块，而不用重新发送整个数据包。在 TCP 协议中，我们把每个分块称为一个 **TCP 段**

![img](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost4@main/%E7%BD%91%E7%BB%9C/https/TCP%E6%AE%B5.png)



宏观来看，应用层与应用层之间的通信依靠传输层



![img](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost4@main/%E7%BD%91%E7%BB%9C/https/%E5%BA%94%E7%94%A8%E5%B1%82.png)



## 网络层

- 传输层的传输数据细节还需依靠网络层来实现，传输层只负责应用层之间的通信的职责
- 网络层会将传输层传过来的TCP报文封装为IP报文，IP报文：IP报文头（具有源IP和目标IP）+TCP报文
- 网络层具有的协议：IP协议，ICMP协议，ARP协议等

（1）IP协议

IP协议具有寻址和路由功能，寻址：根据IP地址寻找到对应的子网，路由：路由器转发寻址请求到实际目的地

IP地址分为网络号和主机号：

- 网络号：标识设备所属的子网
- 主机号：标识设备在子网中具体的主机

举个栗子：例如192.168.233.1/24

这里的/24代表的是子网掩码，表示前24位为网络号，后8位为主机号；在192.168.233.×里的×范围为0-255，这里面的主机号都属于同一子网

（2）ICMP协议

ICMP协议用来实现网络诊断功能和纠错功能，例如ping命令就是由ICMP协议实现的

（3）ARP协议

通过ARP协议可以根据IP地址寻找到主机对应的MAC地址





![img](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost4@main/%E7%BD%91%E7%BB%9C/https/%E7%BD%91%E7%BB%9C%E5%B1%82.png)



## 网络接口层

- 网路接口层将数据链路层和网络层结合到了一起，网络接口层会根据IP地址使用ARP协议寻址到对应的MAC地址，将MAC地址和IP报文拼接到一起变为数据帧
- 通过MAC地址可以在一个局域网中寻找到对应的主机，并且将数据帧发送到目的地

![img](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost4@main/%E7%BD%91%E7%BB%9C/https/%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E5%B1%82.png)



## 每一层数据的封装格式

![img](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost3@main/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%B5%AE%E7%82%B9/%E5%B0%81%E8%A3%85.png)
