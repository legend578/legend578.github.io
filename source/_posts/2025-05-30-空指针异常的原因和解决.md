---
title: 空指针异常的原因和解决
date: 2025-05-30 10:48:01
tags:
---

起因是在将数据库的数据查询出来进行操作时，抛出了空指针异常

一开始为了防止操作空值，从数据库中查询到encData数据进行操作前判空

结果发现在判空的时候就已经空指针异常了

````java
if(StringUtils.isEmpty(encData)){
    log.error(encStr+"解密的数据为空！");
    continue;
}
````



从数据库查询的数据分为两种空：null和空白值

使用空白值进行操作是不会空指针异常的，但是使用null来调用isEmpty则会抛出空指针异常

**解决方法：**

使用org.apache.commons.lang3.StringUtils工具类进行判空即可

```java
if(StringUtils.isEmpty(encData)){
    log.error(encStr+"解密的数据为空！");
    continue;
}
```

# 什么情况会导致空指针异常？

## 使用null调用方法

将字符串置为“”，这不是一个null值，是可以正常操作的

将字符串置为null，将该空值调用方法时都会抛出空指针异常

```java
String str = "";
String nul = null;
System.out.println(str.length());//正常输出0
System.out.println(nul.length());//抛出空指针异常
```



```java
String str = "";
String nul = null;
System.out.println(str.isEmpty());//输出true
System.out.println(nul.isEmpty());//抛出空指针异常
```

可以从上面例子看出：只要是以 null值.方法（）这种方式调用方法都会抛出空指针异常



# 解决方法

使用org.apache.commons.lang3.StringUtils工具类进行判空后再进行操作

该工具类所属依赖

```xml
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-lang3</artifactId>
    <version>3.10</version>
</dependency>
```



对于null值特殊处理：抛出异常信息或抛出错误日志

```java
String nul = null;
if(StringUtils.isEmpty(nul)){
	System.out.println("this is null");
}
else{
	System.out.println(nul.length());
}
```



这种情况也会被判断为空

```
String nul = "";
if(StringUtils.isEmpty(nul)){
	System.out.println("this is null");
}
else{
	System.out.println(nul.length());
}
```

